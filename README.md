# PE å°è¯´é˜…è¯»å™¨ (Flutterç‰ˆ)

## ç®€ä»‹

ä¸€æ¬¾åŸºäº Flutter æ¡†æ¶å¼€å‘çš„è·¨å¹³å°å°è¯´é˜…è¯»åº”ç”¨ã€‚è¿™æ˜¯ä¸€æ¬¾ä¸“æ³¨äºä¸ºè¯»è€…æä¾›æè‡´é˜…è¯»ä½“éªŒçš„è½»é‡çº§å°è¯´é˜…è¯»å™¨ã€‚é‡‡ç”¨ Flutter è·¨å¹³å°æŠ€æœ¯å®ç°ï¼Œå…·å¤‡å‡ºè‰²çš„æ€§èƒ½è¡¨ç°å’Œæµç•…çš„ç”¨æˆ·äº¤äº’ä½“éªŒã€‚é€šè¿‡æ¥å…¥ç½‘ç»œå…¬å¼€çš„å°è¯´ API æ¥å£ï¼Œä¸ºç”¨æˆ·æä¾›ä¸°å¯Œçš„å°è¯´èµ„æºï¼Œè®©é˜…è¯»å˜å¾—æ›´åŠ çº¯ç²¹å’Œæ„‰æ‚¦ã€‚

- **åº”ç”¨åç§°**: PE å°è¯´é˜…è¯»å™¨
- **åº”ç”¨åŒ…å**: `com.pereader.app`
- **æ”¯æŒå¹³å°**: Android, iOS, Windows, macOS, Linux, Web

## âœ¨ ç‰¹æ€§äº®ç‚¹

- ğŸ“š **ä¸°å¯Œçš„ä¹¦æºç®¡ç†** - æ”¯æŒå¤šä¹¦æºåˆ‡æ¢ï¼Œå…¼å®¹ Legado ä¹¦æºæ ¼å¼
- ğŸ” **æ™ºèƒ½æœç´¢** - æ”¯æŒä¹¦åå’Œä½œè€…æœç´¢ï¼Œæä¾›çƒ­é—¨æ¦œå•æ¨è
- ğŸ“– **ä¼˜è´¨é˜…è¯»ä½“éªŒ** - å¯è‡ªå®šä¹‰å­—ä½“å¤§å°ã€è¡Œé«˜ã€èƒŒæ™¯ä¸»é¢˜
- ğŸ“ **æœ¬åœ°ä¹¦æ¶** - é˜…è¯»è¿›åº¦è‡ªåŠ¨ä¿å­˜ï¼Œæ”¯æŒå¤šç§æ’åºæ–¹å¼
- âš¡ **ç« èŠ‚é¢„åŠ è½½** - é¢„åŠ è½½ä¸‹ä¸€ç« ï¼Œåˆ‡æ¢æ›´æµç•…
- ğŸ¨ **Material Design 3** - ç°ä»£åŒ–çš„ UI è®¾è®¡
- ğŸ”„ **Provider çŠ¶æ€ç®¡ç†** - å“åº”å¼æ•°æ®æ›´æ–°

## æŠ€æœ¯æ ˆ

| ç±»åˆ« | æŠ€æœ¯ | ç‰ˆæœ¬ |
|------|------|------|
| **æ¡†æ¶** | Flutter | >= 3.19.0 |
| **è¯­è¨€** | Dart | >= 3.4.3 |
| **çŠ¶æ€ç®¡ç†** | Provider | ^6.1.5+1 |
| **UIæ¡†æ¶** | Material Design 3 | - |
| **HTTPå®¢æˆ·ç«¯** | http | ^1.2.1 |
| **æœ¬åœ°å­˜å‚¨** | shared_preferences | ^2.2.3 |
| **HTMLè§£æ** | html | ^0.15.4 |
| **JSONè·¯å¾„** | json_path | ^0.7.1 |

## é¡¹ç›®ç»“æ„

```
lib/
â”œâ”€â”€ models/              # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ book.dart                 # ä¹¦ç±æ¨¡å‹
â”‚   â”œâ”€â”€ book_source.dart          # ä¹¦æºæ¨¡å‹
â”‚   â”œâ”€â”€ chapter.dart              # ç« èŠ‚æ¨¡å‹
â”‚   â””â”€â”€ chapter_content.dart      # ç« èŠ‚å†…å®¹æ¨¡å‹
â”œâ”€â”€ services/            # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ api_service.dart          # APIè¯·æ±‚æœåŠ¡
â”‚   â”œâ”€â”€ app_log_service.dart      # æ—¥å¿—æœåŠ¡
â”‚   â”œâ”€â”€ reader_settings_service.dart    # é˜…è¯»è®¾ç½®æœåŠ¡
â”‚   â”œâ”€â”€ source_manager_service.dart     # ä¹¦æºç®¡ç†æœåŠ¡
â”‚   â””â”€â”€ storage_service.dart      # å­˜å‚¨æœåŠ¡
â”œâ”€â”€ controllers/          # æ§åˆ¶å™¨å±‚
â”‚   â””â”€â”€ reader_controller.dart  # é˜…è¯»å™¨æ§åˆ¶å™¨
â”œâ”€â”€ utils/               # å·¥å…·ç±»
â”‚   â””â”€â”€ rule_parser.dart       # è§„åˆ™è§£æå™¨
â””â”€â”€ ui/                  # UIå±‚
    â”œâ”€â”€ screens/               # é¡µé¢
    â”‚   â”œâ”€â”€ search_screen.dart         # æœç´¢é¡µ
    â”‚   â”œâ”€â”€ results_screen.dart        # æœç´¢ç»“æœé¡µ
    â”‚   â”œâ”€â”€ detail_screen.dart         # ä¹¦ç±è¯¦æƒ…é¡µ
    â”‚   â”œâ”€â”€ bookshelf_screen.dart      # ä¹¦æ¶é¡µ
    â”‚   â”œâ”€â”€ reader_screen.dart        # é˜…è¯»å™¨é¡µ
    â”‚   â”œâ”€â”€ settings_screen.dart      # è®¾ç½®é¡µ
    â”‚   â”œâ”€â”€ source_management_screen.dart   # ä¹¦æºç®¡ç†
    â”‚   â”œâ”€â”€ source_edit_screen.dart         # ä¹¦æºç¼–è¾‘
    â”‚   â”œâ”€â”€ source_debug_screen.dart        # ä¹¦æºè°ƒè¯•
    â”‚   â””â”€â”€ app_log_screen.dart             # åº”ç”¨æ—¥å¿—
    â”œâ”€â”€ widgets/              # é€šç”¨ç»„ä»¶
    â””â”€â”€ main_scaffold.dart    # ä¸»è„šæ‰‹æ¶
```

## ä¸»è¦åŠŸèƒ½

- **é¦–é¡µ/æœç´¢é¡µ**:
  - åº”ç”¨å£å·åŠç®€ä»‹ã€‚
  - æ”¯æŒæŒ‰ä¹¦åæˆ–ä½œè€…æœç´¢çš„æœç´¢æ¡†ã€‚
  - ä¸»æ¨ä¹¦ç±å±•ç¤ºï¼ˆåŸºäºçˆ†æ›´æ¦œæ¦œé¦–ï¼‰ã€‚
  - çƒ­é—¨æ¦œå•å±•ç¤ºï¼ˆå·…å³°æ¦œã€å‡ºç‰ˆæ¦œã€çˆ†æ›´æ¦œï¼‰ã€‚
- **æœç´¢ä¸è¯¦æƒ…**:
  - æ ¹æ®å…³é”®è¯æœç´¢å°è¯´ã€‚
  - å±•ç¤ºæœç´¢ç»“æœåˆ—è¡¨ã€‚
  - æ˜¾ç¤ºä¹¦ç±è¯¦æƒ…é¡µï¼ŒåŒ…æ‹¬å°é¢ã€ä¹¦åã€ä½œè€…å’Œç®€ä»‹ã€‚
- **ä¹¦æ¶ç®¡ç†**:
  - å°†å–œæ¬¢çš„ä¹¦ç±æ·»åŠ åˆ°æœ¬åœ°ä¹¦æ¶ã€‚
  - ä»ä¹¦æ¶ç§»é™¤ä¹¦ç±ï¼ˆé•¿æŒ‰æ“ä½œï¼‰ã€‚
  - æ”¯æŒæŒ‰â€œæœ€è¿‘é˜…è¯»â€æˆ–â€œæœ€è¿‘æ·»åŠ â€æ’åºã€‚
- **é˜…è¯»ä½“éªŒ**:
  - æ˜¾ç¤ºç« èŠ‚å†…å®¹çš„é˜…è¯»å™¨ç•Œé¢ã€‚
  - è‡ªåŠ¨ä¿å­˜å’Œæ¢å¤ä¸Šæ¬¡é˜…è¯»ä½ç½®ã€‚
  - ä¾§è¾¹æŠ½å±‰å¼çš„ç« èŠ‚åˆ—è¡¨ï¼Œç”¨äºå¿«é€Ÿå¯¼èˆªã€‚
  - é˜…è¯»è®¾ç½®ï¼Œå¯è°ƒæ•´å­—ä½“å¤§å°ã€è¡Œé«˜å’ŒèƒŒæ™¯ä¸»é¢˜ã€‚

## æ•°æ®æ¥æº

æœ¬åº”ç”¨çš„å°è¯´æ•°æ®æ¥æºäº **æŸä¸ªç½‘ç»œå°è¯´å¹³å°** çš„å…¬å¼€APIæ¥å£ã€‚

**è¯·æ³¨æ„**ï¼š
- APIæ¥å£çš„å¯ç”¨æ€§å’Œè¿”å›çš„æ•°æ®ç»“æ„å¯èƒ½ä¼šéšæ—¶å‘ç”Ÿå˜åŒ–
- è¿™å¯èƒ½å¯¼è‡´åº”ç”¨éƒ¨åˆ†æˆ–å…¨éƒ¨åŠŸèƒ½å¤±æ•ˆ
- æœ¬åº”ç”¨ä»…ä¾›å­¦ä¹ å’ŒæŠ€æœ¯äº¤æµä½¿ç”¨ï¼Œè¯·å‹¿ç”¨äºå•†ä¸šç›®çš„

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Flutter SDK >= 3.19.0
- Dart SDK >= 3.4.3
- Android Studio / VS Code

### å®‰è£…æ­¥éª¤

1. å…‹éš†ä»“åº“
```bash
git clone https://github.com/ch6vip/pe.git
cd pe
```

2. å®‰è£…ä¾èµ–
```bash
flutter pub get
```

3. è¿è¡Œåº”ç”¨
```bash
# å¼€å‘æ¨¡å¼
flutter run

# æŒ‡å®šè®¾å¤‡è¿è¡Œ
flutter run -d <device-id>
```

### æ„å»ºå‘å¸ƒç‰ˆæœ¬

```bash
# Android APK
flutter build apk --release

# Android App Bundle (æ¨è)
flutter build appbundle --release

# iOS
flutter build ios --release
```
